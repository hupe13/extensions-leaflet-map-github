function leafext_zoomhome_js(maps,map_id,allfit){if(typeof maps[map_id].zoomControl!=="undefined"){maps[map_id].zoomControl._zoomOutButton.remove();maps[map_id].zoomControl._zoomInButton.remove()}var bounds=[];bounds[map_id]=new L.latLngBounds;var zoomHome=[];zoomHome[map_id]=L.Control.zoomHome();zoomHome[map_id].addTo(maps[map_id]);var ende=[];var markergroups=window.WPLeafletMapPlugin.markergroups;var mapmarkers=0;var mappolygon=0;var maplines=0;var mapcircles=0;Object.entries(markergroups).forEach(([key,value])=>{if(markergroups[key]._map!==null){if(map_id==markergroups[key]._map._leaflet_id){markergroups[key].eachLayer(function(layer){if(layer instanceof L.Marker){mapmarkers++;if(typeof maps[map_id]._shouldFitBounds!=="undefined"){bounds[map_id].extend(layer._latlng)}else if(typeof allfit[map_id]!=="undefined"){allfit[map_id].extend(layer._latlng)}else{}}else if(layer instanceof L.Polygon){mappolygon++;if(typeof maps[map_id]._shouldFitBounds!=="undefined"){bounds[map_id].extend(layer.getBounds())}else if(typeof allfit[map_id]!=="undefined"){allfit[map_id].extend(layer.getBounds())}else{}}else if(layer instanceof L.Polyline){maplines++;if(typeof maps[map_id]._shouldFitBounds!=="undefined"){bounds[map_id].extend(layer.getBounds());ende[map_id]=1;maps[map_id].on("zoomend",function(e){if(ende[map_id]){maps[map_id].fitBounds(bounds[map_id])}ende[map_id]=0})}else if(typeof allfit[map_id]!=="undefined"){allfit[map_id].extend(layer.getBounds())}else{ende[map_id]=1;maps[map_id].on("zoomend",function(e){if(ende[map_id]){zoomHome[map_id].setHomeCoordinates(maps[map_id].getCenter());zoomHome[map_id].setHomeZoom(maps[map_id].getZoom());ende[map_id]=0}})}}else if(layer instanceof L.Circle){mapcircles++;if(typeof maps[map_id]._shouldFitBounds!=="undefined"){if(layer._map){bounds[map_id].extend(layer.getBounds())}else{maps[map_id].addLayer(layer);bounds[map_id].extend(layer.getBounds());maps[map_id].removeLayer(layer)}}else if(typeof allfit[map_id]!=="undefined"){allfit[map_id].extend(layer.getBounds())}}else{}})}}});maps[map_id].whenReady(function(){if(bounds[map_id].isValid()){zoomHome[map_id].setHomeBounds(bounds[map_id]);maps[map_id].fitBounds(bounds[map_id])}else{if(typeof allfit[map_id]!=="undefined"){if(allfit[map_id].isValid()){zoomHome[map_id].setHomeBounds(allfit[map_id])}else{}}else{}}});var geojsons=window.WPLeafletMapPlugin.geojsons;if(geojsons.length>0){var geocount=geojsons.length;ende[map_id]=1;for(var j=0,len=geocount;j<len;j++){var geojson=geojsons[j];if(map_id==geojsons[j]._map._leaflet_id){geojson.on("ready",function(){if(typeof maps[map_id]._shouldFitBounds!=="undefined"){bounds[map_id].extend(this.getBounds());zoomHome[map_id].setHomeBounds(bounds[map_id]);maps[map_id].fitBounds(bounds[map_id])}else if(typeof maps[map_id]._animateToZoom!=="undefined"){zoomHome[map_id].setHomeCoordinates(maps[map_id]._animateToCenter);zoomHome[map_id].setHomeZoom(maps[map_id]._animateToZoom)}else if(!bounds[map_id].isValid()){if(this.json.type=="Feature"){maps[map_id].on("zoomend",function(e){if(ende[map_id]){zoomHome[map_id].setHomeCoordinates(maps[map_id].getCenter());zoomHome[map_id].setHomeZoom(maps[map_id].getZoom());ende[map_id]=0}})}else{zoomHome[map_id].setHomeCoordinates(maps[map_id].getCenter());zoomHome[map_id].setHomeZoom(maps[map_id].getZoom())}}else{}if(typeof allfit[map_id]!=="undefined"){allfit[map_id].extend(this.getBounds());zoomHome[map_id].setHomeBounds(allfit[map_id])}})}}}maps[map_id].on("eledata_loaded",function(e){if(typeof maps[map_id]._shouldFitBounds!=="undefined"){bounds[map_id].extend(e.layer.getBounds())}if(bounds[map_id].isValid()){zoomHome[map_id].setHomeBounds(bounds[map_id]);maps[map_id].fitBounds(bounds[map_id])}else{zoomHome[map_id].setHomeCoordinates(maps[map_id].getCenter());zoomHome[map_id].setHomeZoom(maps[map_id].getZoom())}})}
